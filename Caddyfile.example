# Caddyfile Configuration for chess.cflux.org
# Place this in /etc/caddy/Caddyfile or your Caddy config directory

chess.cflux.org {
    # Automatic HTTPS via Let's Encrypt (Caddy handles this automatically)
    
    # Backend API endpoints
    handle /api/* {
        reverse_proxy localhost:3004
    }
    
    # WebSocket endpoint for Socket.IO
    handle /socket.io/* {
        reverse_proxy localhost:3004
    }
    
    # Health check endpoint
    handle /health {
        reverse_proxy localhost:3004
    }
    
    # Frontend - everything else
    handle {
        reverse_proxy localhost:3005
    }
    
    # Logging (optional)
    log {
        output file /var/log/caddy/chess.cflux.org.log
        format json
    }
}
